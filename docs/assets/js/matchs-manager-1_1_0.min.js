class MatchManager{constructor(t,s){this.t=t;this.s=s;this.e=new e(this.s.i())}sortData(){for(const t of this.r()){this.s.h(t).n()}}buildUI(){for(const t of this.r()){const s=this.s.h(t);const e=c.a(t);if(s.c()){const i=s.o();const r=i.l;const n=DateUtils.u(r,1,30);if(DateUtils._(n,o.m())===T.d){$("#next-match").hide();$(`#${e.f}`).hide();s.$()}else{this.g(e.f,r);if(this.T(t)){this.p(i);this.M(s)}}}if(this.T(t)){if(!s.c()){const h=$("#warning-message");let t=s.w;if(s.w!=s.A){t=`${s.w}/${s.A}`}h.text(`La saison ${t} est probablement terminée, nous vous invitons à revenir régulièrement et à recharger le site pour vérifier s'il y a ou non de nouvelles rencontres, merci de votre compréhension.`);h.show()}if(!s.I()){$("#second-next-match").hide()}new a(s.D,this.s).N();this.S();this.e.N()}}}T(t){return this.t===t}r(){return[MatchExternalConstants.KEY_SENIOR_TEAM,MatchExternalConstants.KEY_U11M_TEAM]}g(t,s){const e=DateUtils.y(s);$(`#${t}`).text(new d(e).v());$(`#${t}`).show()}p(t){$("#next-match-title").show();$("#next-match-group").show();new n(t,this.s,"#next-match",g.U).N()}M(t){if(t.I()){new n(t.L(),this.s,"#second-next-match",g.U).N()}}S(){$("#waiting-message > button").hide();$("#waiting-message").removeAttr("style")}}class a{constructor(t,s){this.R=t;this.s=s}N(){if(this.R.length>0){$("#past-match-title").show();$("#past-match-text").show();$("#past-match-group").show();const s=this.R.map(function(t){return new l(t.l).v()});let t=0;for(const e of this.R){const i=s[t];new r(i).N();if(t>=this.R.length-1){$("#past-match-placeholder").hide()}new n(e,this.s,`#${i}`,g.x).N();t++}}}}class r{constructor(t){this.b=t}N(){const t=$("#past-match-group");const s=$("#past-match-placeholder").clone();s.attr("id",this.b);t.prepend(s)}}class n{constructor(t,s,e,i){this.F=t;this.s=s;this.b=e;this.O=i;this.G=null}N(){if(this.O){$(this.b).show()}this.H();this.Y();this.C();this.K();this.j()}H(){const t=$(`${this.b} > div > h5`);t.removeClass("placeholder w-50");if(this.P().X.length===1){t.text(`Match contre ${this.P().X[0].name}`)}else{t.text(`Match contre ${this.P().X.length} équipes`)}}Y(){let t=null;const s=this.P().l;if(this.O){t=new f(DateUtils.y(s)).v()}else{t=new u(s).v()}if(t!==null){const e=$(`${this.b} > div > small`);e.removeClass("placeholder w-25");e.text(t)}}C(){const t=$(`${this.b} > p`);let s="Résultat à retrouver sur nos réseaux !";if(this.O){s=new _(this.P().l).v()}t.removeClass("placeholder w-50");t.text(s)}K(){const t=$(`${this.b} > small`);t.removeClass("placeholder w-50");t.text(`Lieu : ${this.P().W} à ${this.P().k}`)}j(){$(`${this.b}`).removeClass("placeholder-wave")}P(){if(this.G===null){this.G=h.create(this.F,this.s)}return this.G}}class e{constructor(t){this.q=t}N(){if(this.q!==null){const t=$(`#generated-at`);t.removeClass("placeholder w-50");t.text(this.B());t.show()}}B(){return`Sur la base d'informations collectées le ${this.q}${this.J()}.`}J(){let s="";const e=this.Q();const i=e.V;if(i!==T.z){let t="ND";const r=e.Z;if(i===T.tt){t=`${r} minute(s)`}else if(i===T.st){t=`${r} heure(s)`}else{t=`${r} jour(s)`}s=` soit il y a ${t}`}return s}Q(){const t=DateUtils.convertStringToDate(this.q);return DateUtils.et(t)}}class t{constructor(t,s){this.it=t;this.rt=s}get nt(){return this.it}get f(){return this.rt}}class s{static ht(){return new t(0,"menu-flag-seniors")}static ct(){return new t(1,"menu-flag-u9")}static ot(){return new t(2,"menu-flag-u11m")}}class c{static lt=s.ht();static ut=s.ct();static _t=s.ot();static a(t){let s=null;switch(t){case"SEN":s=c.lt;break;case"U9":s=c.ut;break;case"U11M":s=c._t;break}return s}}class MatchDb{constructor(){this.mt=[];this.dt=[];this.q=null}addTeamMatchList(t,s){const e=c.a(t);this.mt[e.nt]=s}h(t){const s=c.a(t);if(s.nt in this.mt){return this.mt[s.nt]}throw new Error("Pas de données pour cet index !!")}addGym(t,s){this.dt[t]=s}ft(t){if(t in this.dt){return this.dt[t]}throw new Error("Pas de gymnase pour cet index !!")}setGeneratedAt(t){this.q=t}i(){return this.q}}class TeamMatchList{constructor(){this.$t=[];this.R=[];this.gt=null;this.Tt=null;this.pt=0;this.Mt=null;this.Et=null}addTeamMatch(t){const s=DateUtils.u(t.l,1,30);if(DateUtils._(s,o.m())===T.d){this.R.push(t)}else{this.$t.push(t)}}n(){this.$t.sort(function(t,s){return t.l.getTime()-s.l.getTime()});this.R.sort(function(t,s){return t.l.getTime()-s.l.getTime()})}$(){if(!this.c()){throw new Error("Impossible de supprimer la prochaine rencontre passée car elle n'existe pas !!")}let t=null;try{t=this.$t.shift();this.R.unshift(t);this.gt=this.Tt;this.Tt=null;this.pt=0}catch(t){this.pt++;console.error(`L'erreur suivante s'est produite : ${t}`)}finally{if(this.pt>=g.wt){console.log("La page va être rechargée dans quelques secondes, merci de votre compréhension !")}}return t}c(){return this.$t.length>0}I(){return this.$t.length>1}o(){if(this.gt===null&&this.c()){this.gt=this.$t[0]}return this.gt}L(){if(this.Tt===null&&this.I()){this.Tt=this.$t[1]}return this.Tt}get w(){if(!this.c()&&this.Mt===null){this.Mt=this.D[0].l.getFullYear()}return this.Mt}get A(){if(!this.c()&&this.Et===null){this.Et=this.D[this.D.length-1].l.getFullYear()}return this.Et}get D(){return this.R}}class Team{constructor(t){this.At=t}get name(){return this.At}}class TeamMatch{constructor(t,s,e){this.It=t;this.Nt=s;this.Dt=e}get l(){return this.It}get St(){return this.Nt}get X(){return this.Dt}}class Gym{constructor(t,s,e){this.At=t;this.yt=s;this.vt=e}get name(){return this.At}get Ut(){return this.yt}get Lt(){return this.vt}}class i{constructor(t,s){this.It=t.l;this.Dt=t.X;this.Rt=s}get l(){return this.It}get X(){return this.Dt}get W(){return this.Rt.name}get xt(){return this.Rt.Ut}get k(){return this.Rt.Lt}}class h{static create(t,s){return new i(t,s.ft(t.St))}}class o{static m(){return new Date}}class l{constructor(t){this.bt=t}v(){return`${this.Ft()}${this.Ot()}${this.Gt()}_${this.Ht()}${this.Yt()}`}Gt(){return this.bt.getDate()}Ot(){const t=this.bt.getMonth()+1;let s=t;if(t<10){s="0";s=s.concat(t)}return s}Ft(){return this.bt.getFullYear()}Ht(){return this.bt.getHours()}Yt(){const t=this.bt.getMinutes();let s=t;if(t<10){s="0";s=s.concat(t)}return s}}class u{constructor(t){this.bt=t}v(){return`${this.Gt()}/${this.Ot()}/${this.Ft()}`}Gt(){const t=this.bt.getDate();let s=t;if(s<10){s="0";s=s.concat(t)}return s}Ot(){const t=this.bt.getMonth()+1;let s=t;if(t<10){s="0";s=s.concat(t)}return s}Ft(){return this.bt.getFullYear()}}class _{constructor(t){this.bt=t}v(){return`Le ${this.Gt()} ${this.Ot()} ${this.Ft()} à ${this.Ht()}h${this.Yt()}`}Gt(){return this.bt.getDate()}Ot(){const t=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"];return t[this.bt.getMonth()]}Ft(){return this.bt.getFullYear()}Ht(){return this.bt.getHours()}Yt(){const t=this.bt.getMinutes();let s=t;if(t<10){s="0";s=s.concat(t)}return s}}class m{constructor(t,s){this.Ct=t;this.Kt=s}get Z(){return this.Ct}get V(){return this.Kt}}class d{constructor(t){this.jt=t}v(){let t=this.jt.Z;if(this.jt.V===T.Xt){t=`J-${t}`}else if(this.jt.V===T.st){t=`H-${t}`}else if(this.jt.V===T.tt){t=`M-${t}`}return t}}class f{constructor(t){this.jt=t}v(){let t=this.jt.Z;if(this.jt.V===T.Xt){t=`Dans ${t} jour(s)`}else if(this.jt.V===T.st){t=`Dans ${t} heure(s)`}else if(this.jt.V===T.tt){t=`Dans ${t} minute(s)`}return t}}class DateUtils{static convertStringToDate(t){const s=t.split(" ");const e=s[0].split("/");const i=s[1].split(":");return new Date(parseInt(e[2]),parseInt(e[1])-1,parseInt(e[0]),parseInt(i[0]),parseInt(i[1]))}static _(t,s){const e=t.getTime();const i=s.getTime();if(e<i){return T.d}else if(e>i){return T.Pt}else{return T.Wt}}static y(t){return this.kt(t,true)}static et(t){return this.kt(t,false)}static kt(t,s){const e=s?DateUtils._(t,o.m()):DateUtils._(o.m(),t);let i="ATM";let r=T.z;if(!(e===T.d||e===T.Wt)){const n=s?Math.ceil((t.getTime()-o.m().getTime())/6e4):Math.ceil((o.m().getTime()-t.getTime())/6e4);const h=1440;const a=60;if(n>=h){i=Math.ceil(n/h);r=T.Xt}else if(n>=a){i=Math.ceil(n/a);r=T.st}else{i=n;r=T.tt}}return new m(i,r)}static u(t,s,e){const i=36e5;const r=6e4;return new Date(t.getTime()+i*s+r*e)}}class MatchExternalConstants{static KEY_SENIOR_TEAM="SEN";static KEY_U9_TEAM="U9";static KEY_U11M_TEAM="U11M"}class g{static qt=0;static Bt=1;static Jt=2;static wt=3;static U=true;static x=false}class T{static d=-1;static Pt=1;static Wt=0;static z=0;static tt=1;static st=2;static Xt=3}